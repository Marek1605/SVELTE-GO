import{s as ae,n as L,d as k,r as le,D as F,i as S,b as p,y as U,q as g,v as ne,g as H,c as C,e as I,w as j,j as N,h as D,k as re,B as ie,a as B,f as P,t as T,m as se,z as G,H as K,x as Q}from"../chunks/DegHwCHz.js";import{e as A}from"../chunks/BS8_HMP2.js";import{S as oe,i as ce}from"../chunks/DwtPztOd.js";import{p as ue}from"../chunks/CvbFZo7z.js";function Z(a,e,l){const t=a.slice();return t[17]=e[l],t[19]=l,t}function J(a,e,l){const t=a.slice();return t[20]=e[l],t}function W(a){let e,l,t,u,n=(a[7]||a[0])+"",o,s,i,r,v,E;return{c(){e=D("div"),l=T("V√Ωsledky pre: "),t=D("strong"),u=T('"'),o=T(n),s=T('"'),i=T(" ‚Ä¢ N√°jden√Ωch "),r=D("strong"),v=T(a[3]),E=T(" produktov"),this.h()},l(m){e=C(m,"DIV",{class:!0});var c=I(e);l=P(c,"V√Ωsledky pre: "),t=C(c,"STRONG",{});var f=I(t);u=P(f,'"'),o=P(f,n),s=P(f,'"'),f.forEach(k),i=P(c," ‚Ä¢ N√°jden√Ωch "),r=C(c,"STRONG",{});var _=I(r);v=P(_,a[3]),_.forEach(k),E=P(c," produktov"),c.forEach(k),this.h()},h(){g(e,"class","search-info svelte-a05ptn")},m(m,c){S(m,e,c),p(e,l),p(e,t),p(t,u),p(t,o),p(t,s),p(e,i),p(e,r),p(r,v),p(e,E)},p(m,c){c&129&&n!==(n=(m[7]||m[0])+"")&&B(o,n),c&8&&B(v,m[3])},d(m){m&&k(e)}}}function fe(a){let e,l='<div class="empty-icon svelte-a05ptn">üîç</div> <h3 class="svelte-a05ptn">Zadajte hƒæadan√Ω v√Ωraz</h3> <p>Nap√≠≈°te n√°zov produktu, znaƒçku alebo kateg√≥riu.</p>';return{c(){e=D("div"),e.innerHTML=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-dfpd89"&&(e.innerHTML=l),this.h()},h(){g(e,"class","empty svelte-a05ptn")},m(t,u){S(t,e,u)},p:L,d(t){t&&k(e)}}}function he(a){let e,l,t,u=A(a[1]),n=[];for(let s=0;s<u.length;s+=1)n[s]=Y(J(a,u,s));let o=a[5]>1&&$(a);return{c(){e=D("div");for(let s=0;s<n.length;s+=1)n[s].c();l=N(),o&&o.c(),t=G(),this.h()},l(s){e=C(s,"DIV",{class:!0});var i=I(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(k),l=H(s),o&&o.l(s),t=G(),this.h()},h(){g(e,"class","products-grid svelte-a05ptn")},m(s,i){S(s,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);S(s,l,i),o&&o.m(s,i),S(s,t,i)},p(s,i){if(i&2){u=A(s[1]);let r;for(r=0;r<u.length;r+=1){const v=J(s,u,r);n[r]?n[r].p(v,i):(n[r]=Y(v),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=u.length}s[5]>1?o?o.p(s,i):(o=$(s),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(s){s&&(k(e),k(l),k(t)),se(n,s),o&&o.d(s)}}}function de(a){let e,l,t="üîç",u,n,o="≈Ωiadne v√Ωsledky",s,i,r,v=(a[7]||a[0])+"",E,m;return{c(){e=D("div"),l=D("div"),l.textContent=t,u=N(),n=D("h3"),n.textContent=o,s=N(),i=D("p"),r=T('Pre hƒæadan√Ω v√Ωraz "'),E=T(v),m=T('" sme nena≈°li ≈æiadne produkty.'),this.h()},l(c){e=C(c,"DIV",{class:!0});var f=I(e);l=C(f,"DIV",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-c8icig"&&(l.textContent=t),u=H(f),n=C(f,"H3",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-8cs3jh"&&(n.textContent=o),s=H(f),i=C(f,"P",{});var _=I(i);r=P(_,'Pre hƒæadan√Ω v√Ωraz "'),E=P(_,v),m=P(_,'" sme nena≈°li ≈æiadne produkty.'),_.forEach(k),f.forEach(k),this.h()},h(){g(l,"class","empty-icon svelte-a05ptn"),g(n,"class","svelte-a05ptn"),g(e,"class","empty svelte-a05ptn")},m(c,f){S(c,e,f),p(e,l),p(e,u),p(e,n),p(e,s),p(e,i),p(i,r),p(i,E),p(i,m)},p(c,f){f&129&&v!==(v=(c[7]||c[0])+"")&&B(E,v)},d(c){c&&k(e)}}}function pe(a){let e,l='<div class="spinner svelte-a05ptn"></div> <p>Hƒæad√°m produkty...</p>';return{c(){e=D("div"),e.innerHTML=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1k2fcng"&&(e.innerHTML=l),this.h()},h(){g(e,"class","loading svelte-a05ptn")},m(t,u){S(t,e,u)},p:L,d(t){t&&k(e)}}}function X(a){let e,l=a[20].offer_count+"",t,u;return{c(){e=D("div"),t=T(l),u=T(" pon√∫k"),this.h()},l(n){e=C(n,"DIV",{class:!0});var o=I(e);t=P(o,l),u=P(o," pon√∫k"),o.forEach(k),this.h()},h(){g(e,"class","product-offers svelte-a05ptn")},m(n,o){S(n,e,o),p(e,t),p(e,u)},p(n,o){o&2&&l!==(l=n[20].offer_count+"")&&B(t,l)},d(n){n&&k(e)}}}function Y(a){let e,l,t,u,n,o,s,i,r=(a[20].title||a[20].name)+"",v,E,m,c=te(a[20].price_min||a[20].price)+"",f,_,b,y,q,O,d=a[20].offer_count>0&&X(a);return{c(){e=D("a"),l=D("div"),t=D("img"),o=N(),s=D("div"),i=D("h3"),v=T(r),E=N(),m=D("div"),f=T(c),_=N(),d&&d.c(),b=N(),this.h()},l(h){e=C(h,"A",{href:!0,class:!0});var V=I(e);l=C(V,"DIV",{class:!0});var z=I(l);t=C(z,"IMG",{src:!0,alt:!0,class:!0}),z.forEach(k),o=H(V),s=C(V,"DIV",{class:!0});var w=I(s);i=C(w,"H3",{class:!0});var M=I(i);v=P(M,r),M.forEach(k),E=H(w),m=C(w,"DIV",{class:!0});var R=I(m);f=P(R,c),R.forEach(k),_=H(w),d&&d.l(w),w.forEach(k),b=H(V),V.forEach(k),this.h()},h(){K(t.src,u=a[20].image_url||"https://via.placeholder.com/200")||g(t,"src",u),g(t,"alt",n=a[20].title),g(t,"class","svelte-a05ptn"),g(l,"class","product-img svelte-a05ptn"),g(i,"class","product-title svelte-a05ptn"),g(m,"class","product-price svelte-a05ptn"),g(s,"class","product-info svelte-a05ptn"),g(e,"href",y="/produkt/"+(a[20].slug||a[20].id)),g(e,"class","product-card svelte-a05ptn")},m(h,V){S(h,e,V),p(e,l),p(l,t),p(e,o),p(e,s),p(s,i),p(i,v),p(s,E),p(s,m),p(m,f),p(s,_),d&&d.m(s,null),p(e,b),q||(O=U(t,"error",ve),q=!0)},p(h,V){V&2&&!K(t.src,u=h[20].image_url||"https://via.placeholder.com/200")&&g(t,"src",u),V&2&&n!==(n=h[20].title)&&g(t,"alt",n),V&2&&r!==(r=(h[20].title||h[20].name)+"")&&B(v,r),V&2&&c!==(c=te(h[20].price_min||h[20].price)+"")&&B(f,c),h[20].offer_count>0?d?d.p(h,V):(d=X(h),d.c(),d.m(s,null)):d&&(d.d(1),d=null),V&2&&y!==(y="/produkt/"+(h[20].slug||h[20].id))&&g(e,"href",y)},d(h){h&&k(e),d&&d.d(),q=!1,O()}}}function $(a){let e,l,t,u,n,o,s,i,r,v,E,m=A(Array(Math.min(a[5],5))),c=[];for(let f=0;f<m.length;f+=1)c[f]=x(Z(a,m,f));return{c(){e=D("div"),l=D("button"),t=T("‚Äπ Predo≈°l√°"),n=N();for(let f=0;f<c.length;f+=1)c[f].c();o=N(),s=D("button"),i=T("ƒéal≈°ia ‚Ä∫"),this.h()},l(f){e=C(f,"DIV",{class:!0});var _=I(e);l=C(_,"BUTTON",{class:!0});var b=I(l);t=P(b,"‚Äπ Predo≈°l√°"),b.forEach(k),n=H(_);for(let q=0;q<c.length;q+=1)c[q].l(_);o=H(_),s=C(_,"BUTTON",{class:!0});var y=I(s);i=P(y,"ƒéal≈°ia ‚Ä∫"),y.forEach(k),_.forEach(k),this.h()},h(){g(l,"class","page-btn svelte-a05ptn"),l.disabled=u=a[4]===1,g(s,"class","page-btn svelte-a05ptn"),s.disabled=r=a[4]===a[5],g(e,"class","pagination svelte-a05ptn")},m(f,_){S(f,e,_),p(e,l),p(l,t),p(e,n);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(e,null);p(e,o),p(e,s),p(s,i),v||(E=[U(l,"click",a[12]),U(s,"click",a[14])],v=!0)},p(f,_){if(_&16&&u!==(u=f[4]===1)&&(l.disabled=u),_&560){m=A(Array(Math.min(f[5],5)));let b;for(b=0;b<m.length;b+=1){const y=Z(f,m,b);c[b]?c[b].p(y,_):(c[b]=x(y),c[b].c(),c[b].m(e,o))}for(;b<c.length;b+=1)c[b].d(1);c.length=m.length}_&48&&r!==(r=f[4]===f[5])&&(s.disabled=r)},d(f){f&&k(e),se(c,f),v=!1,le(E)}}}function x(a){let e,l=a[19]+1+"",t,u,n;function o(){return a[13](a[19])}return{c(){e=D("button"),t=T(l),this.h()},l(s){e=C(s,"BUTTON",{class:!0});var i=I(e);t=P(i,l),i.forEach(k),this.h()},h(){g(e,"class","page-btn svelte-a05ptn"),Q(e,"active",a[4]===a[19]+1)},m(s,i){S(s,e,i),p(e,t),u||(n=U(e,"click",o),u=!0)},p(s,i){a=s,i&16&&Q(e,"active",a[4]===a[19]+1)},d(s){s&&k(e),u=!1,n()}}}function _e(a){let e,l,t,u,n,o="üîç Vyhƒæad√°vanie",s,i,r,v,E,m="Hƒæada≈•",c,f,_,b;document.title=e=(a[0]?"V√Ωsledky: "+a[0]:"Vyhƒæad√°vanie")+" | MegaPrice";let y=a[6]&&W(a);function q(h,V){if(h[2])return pe;if(h[6]&&h[1].length===0)return de;if(h[1].length>0)return he;if(!h[6])return fe}let O=q(a),d=O&&O(a);return{c(){l=N(),t=D("div"),u=D("div"),n=D("h1"),n.textContent=o,s=N(),i=D("form"),r=D("input"),v=N(),E=D("button"),E.textContent=m,c=N(),y&&y.c(),f=N(),d&&d.c(),this.h()},l(h){ne("svelte-lwlqr",document.head).forEach(k),l=H(h),t=C(h,"DIV",{class:!0});var z=I(t);u=C(z,"DIV",{class:!0});var w=I(u);n=C(w,"H1",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-10kllz0"&&(n.textContent=o),s=H(w),i=C(w,"FORM",{class:!0});var M=I(i);r=C(M,"INPUT",{type:!0,placeholder:!0,class:!0}),v=H(M),E=C(M,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(E)!=="svelte-17oh92o"&&(E.textContent=m),M.forEach(k),w.forEach(k),c=H(z),y&&y.l(z),f=H(z),d&&d.l(z),z.forEach(k),this.h()},h(){g(n,"class","svelte-a05ptn"),g(r,"type","text"),g(r,"placeholder","Hƒæada≈• produkty..."),g(r,"class","search-input svelte-a05ptn"),g(E,"type","submit"),g(E,"class","search-btn svelte-a05ptn"),g(i,"class","search-form svelte-a05ptn"),g(u,"class","search-header svelte-a05ptn"),g(t,"class","search-page svelte-a05ptn")},m(h,V){S(h,l,V),S(h,t,V),p(t,u),p(u,n),p(u,s),p(u,i),p(i,r),F(r,a[0]),p(i,v),p(i,E),p(t,c),y&&y.m(t,null),p(t,f),d&&d.m(t,null),_||(b=[U(r,"input",a[11]),U(i,"submit",a[8])],_=!0)},p(h,[V]){V&1&&e!==(e=(h[0]?"V√Ωsledky: "+h[0]:"Vyhƒæad√°vanie")+" | MegaPrice")&&(document.title=e),V&1&&r.value!==h[0]&&F(r,h[0]),h[6]?y?y.p(h,V):(y=W(h),y.c(),y.m(t,f)):y&&(y.d(1),y=null),O===(O=q(h))&&d?d.p(h,V):(d&&d.d(1),d=O&&O(h),d&&(d.c(),d.m(t,null)))},i:L,o:L,d(h){h&&(k(l),k(t)),y&&y.d(),d&&d.d(),_=!1,le(b)}}}let ee=20;function te(a){return(a||0).toLocaleString("sk-SK",{minimumFractionDigits:2,maximumFractionDigits:2})+" ‚Ç¨"}const ve=a=>a.target.src="https://via.placeholder.com/200";function me(a,e,l){let t,u;re(a,ue,d=>l(10,u=d));const n="http://pc4kcc0ko0k0k08gk840cos0.46.224.7.54.sslip.io/api/v1";let o="",s=[],i=!1,r=0,v=1,E=1,m=!1;ie(async()=>{l(0,o=t),t&&await c()});async function c(){var d,h,V,z;if(o.trim()){l(2,i=!0),l(6,m=!0);try{const M=await(await fetch(n+"/products?search="+encodeURIComponent(o)+"&page="+v+"&limit="+ee)).json();M.success?(l(1,s=((d=M.data)==null?void 0:d.items)||((h=M.data)==null?void 0:h.products)||M.data||[]),l(3,r=((V=M.data)==null?void 0:V.total)||((z=M.meta)==null?void 0:z.total)||s.length),l(5,E=Math.ceil(r/ee)||1)):(l(1,s=[]),l(3,r=0))}catch(w){console.error("Search error:",w),l(1,s=[]),l(3,r=0)}l(2,i=!1)}}function f(d){d==null||d.preventDefault(),l(4,v=1);const h=new URL(window.location.href);h.searchParams.set("q",o),window.history.pushState({},"",h),c()}function _(d){l(4,v=d),c(),window.scrollTo(0,0)}function b(){o=this.value,l(0,o)}const y=()=>_(v-1),q=d=>_(d+1),O=()=>_(v+1);return a.$$.update=()=>{a.$$.dirty&1024&&l(7,t=u.url.searchParams.get("q")||"")},[o,s,i,r,v,E,m,t,f,_,u,b,y,q,O]}class Ee extends oe{constructor(e){super(),ce(this,e,me,_e,ae,{})}}export{Ee as component};
