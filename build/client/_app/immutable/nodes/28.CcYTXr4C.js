import{s as fe,n as st,d as r,i as D,b as s,y as Ht,q as i,c as n,e as m,w as T,g as j,h as o,j as y,R as Qt,k as ie,B as pe,G as he,r as _e,a as G,H as ce,D as vt,I as me,f as N,t as V,m as be}from"../chunks/DFArySuv.js";import{e as ue}from"../chunks/BCvDt_cB.js";import{S as xe,i as Ce}from"../chunks/s82JoINO.js";function ve(a,t,l){const e=a.slice();return e[20]=t[l],e}function ke(a){let t,l,e,u="üíµ",f,p,g,v=W(a[4].totalTopup,2)+"",d,_,c,h,P="Celkom dobit√Ω kredit",w,B,L,Y="üí∏",J,H,R,b=W(a[4].totalSpent,2)+"",O,M,X,I,q="Celkom minut√©",mt,z,A,kt="üëÜ",at,S,x,C=W(a[4].totalClicks)+"",dt,bt,K,xt="Poƒçet preklikov",ft,U,nt,pt,Xt="Typ transakcie",Mt,F,$,$t="V≈°etky",tt,te="Dob√≠janie",et,ee="Prekliky",lt,le="Odpoƒç√≠tanie",qt,ot,ht,se="Od",Ut,rt,Rt,it,_t,ae="Do",zt,ct,gt,Q,ut,Ft,jt=a[5].length+"",Et,Kt,Zt,Gt,ne;function oe(k,E){return k[5].length===0?ge:ye}let Dt=oe(a),Z=Dt(a);return{c(){t=o("div"),l=o("div"),e=o("span"),e.textContent=u,f=y(),p=o("div"),g=o("span"),d=V(v),_=V(" ‚Ç¨"),c=y(),h=o("span"),h.textContent=P,w=y(),B=o("div"),L=o("span"),L.textContent=Y,J=y(),H=o("div"),R=o("span"),O=V(b),M=V(" ‚Ç¨"),X=y(),I=o("span"),I.textContent=q,mt=y(),z=o("div"),A=o("span"),A.textContent=kt,at=y(),S=o("div"),x=o("span"),dt=V(C),bt=y(),K=o("span"),K.textContent=xt,ft=y(),U=o("div"),nt=o("div"),pt=o("label"),pt.textContent=Xt,Mt=y(),F=o("select"),$=o("option"),$.textContent=$t,tt=o("option"),tt.textContent=te,et=o("option"),et.textContent=ee,lt=o("option"),lt.textContent=le,qt=y(),ot=o("div"),ht=o("label"),ht.textContent=se,Ut=y(),rt=o("input"),Rt=y(),it=o("div"),_t=o("label"),_t.textContent=ae,zt=y(),ct=o("input"),gt=y(),Q=o("div"),ut=o("h2"),Ft=V("Hist√≥ria transakci√≠ ("),Et=V(jt),Kt=V(")"),Zt=y(),Z.c(),this.h()},l(k){t=n(k,"DIV",{class:!0});var E=m(t);l=n(E,"DIV",{class:!0});var St=m(l);e=n(St,"SPAN",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-mkqpbp"&&(e.textContent=u),f=j(St),p=n(St,"DIV",{class:!0});var Tt=m(p);g=n(Tt,"SPAN",{class:!0});var Yt=m(g);d=N(Yt,v),_=N(Yt," ‚Ç¨"),Yt.forEach(r),c=j(Tt),h=n(Tt,"SPAN",{class:!0,"data-svelte-h":!0}),T(h)!=="svelte-mhgu2v"&&(h.textContent=P),Tt.forEach(r),St.forEach(r),w=j(E),B=n(E,"DIV",{class:!0});var Pt=m(B);L=n(Pt,"SPAN",{class:!0,"data-svelte-h":!0}),T(L)!=="svelte-1ucb4c8"&&(L.textContent=Y),J=j(Pt),H=n(Pt,"DIV",{class:!0});var It=m(H);R=n(It,"SPAN",{class:!0});var Jt=m(R);O=N(Jt,b),M=N(Jt," ‚Ç¨"),Jt.forEach(r),X=j(It),I=n(It,"SPAN",{class:!0,"data-svelte-h":!0}),T(I)!=="svelte-1tcgh4n"&&(I.textContent=q),It.forEach(r),Pt.forEach(r),mt=j(E),z=n(E,"DIV",{class:!0});var At=m(z);A=n(At,"SPAN",{class:!0,"data-svelte-h":!0}),T(A)!=="svelte-1os234a"&&(A.textContent=kt),at=j(At),S=n(At,"DIV",{class:!0});var Nt=m(S);x=n(Nt,"SPAN",{class:!0});var re=m(x);dt=N(re,C),re.forEach(r),bt=j(Nt),K=n(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),T(K)!=="svelte-1o5wl1g"&&(K.textContent=xt),Nt.forEach(r),At.forEach(r),E.forEach(r),ft=j(k),U=n(k,"DIV",{class:!0});var Ct=m(U);nt=n(Ct,"DIV",{class:!0});var Vt=m(nt);pt=n(Vt,"LABEL",{class:!0,"data-svelte-h":!0}),T(pt)!=="svelte-a140wa"&&(pt.textContent=Xt),Mt=j(Vt),F=n(Vt,"SELECT",{class:!0});var yt=m(F);$=n(yt,"OPTION",{"data-svelte-h":!0}),T($)!=="svelte-1o6vx07"&&($.textContent=$t),tt=n(yt,"OPTION",{"data-svelte-h":!0}),T(tt)!=="svelte-eq3m0l"&&(tt.textContent=te),et=n(yt,"OPTION",{"data-svelte-h":!0}),T(et)!=="svelte-1f1ryth"&&(et.textContent=ee),lt=n(yt,"OPTION",{"data-svelte-h":!0}),T(lt)!=="svelte-v29bju"&&(lt.textContent=le),yt.forEach(r),Vt.forEach(r),qt=j(Ct),ot=n(Ct,"DIV",{class:!0});var wt=m(ot);ht=n(wt,"LABEL",{class:!0,"data-svelte-h":!0}),T(ht)!=="svelte-qbu5r5"&&(ht.textContent=se),Ut=j(wt),rt=n(wt,"INPUT",{type:!0,class:!0}),wt.forEach(r),Rt=j(Ct),it=n(Ct,"DIV",{class:!0});var Lt=m(it);_t=n(Lt,"LABEL",{class:!0,"data-svelte-h":!0}),T(_t)!=="svelte-13l3227"&&(_t.textContent=ae),zt=j(Lt),ct=n(Lt,"INPUT",{type:!0,class:!0}),Lt.forEach(r),Ct.forEach(r),gt=j(k),Q=n(k,"DIV",{class:!0});var Ot=m(Q);ut=n(Ot,"H2",{class:!0});var Bt=m(ut);Ft=N(Bt,"Hist√≥ria transakci√≠ ("),Et=N(Bt,jt),Kt=N(Bt,")"),Bt.forEach(r),Zt=j(Ot),Z.l(Ot),Ot.forEach(r),this.h()},h(){i(e,"class","summary-icon svelte-jox709"),i(g,"class","summary-value svelte-jox709"),i(h,"class","summary-label svelte-jox709"),i(p,"class","summary-content"),i(l,"class","summary-card success svelte-jox709"),i(L,"class","summary-icon svelte-jox709"),i(R,"class","summary-value svelte-jox709"),i(I,"class","summary-label svelte-jox709"),i(H,"class","summary-content"),i(B,"class","summary-card danger svelte-jox709"),i(A,"class","summary-icon svelte-jox709"),i(x,"class","summary-value svelte-jox709"),i(K,"class","summary-label svelte-jox709"),i(S,"class","summary-content"),i(z,"class","summary-card info svelte-jox709"),i(t,"class","summary-grid svelte-jox709"),i(pt,"class","svelte-jox709"),$.__value="all",vt($,$.__value),tt.__value="topup",vt(tt,tt.__value),et.__value="click",vt(et,et.__value),lt.__value="deduction",vt(lt,lt.__value),i(F,"class","svelte-jox709"),a[0]===void 0&&me(()=>a[12].call(F)),i(nt,"class","filter-group svelte-jox709"),i(ht,"class","svelte-jox709"),i(rt,"type","date"),i(rt,"class","svelte-jox709"),i(ot,"class","filter-group svelte-jox709"),i(_t,"class","svelte-jox709"),i(ct,"type","date"),i(ct,"class","svelte-jox709"),i(it,"class","filter-group svelte-jox709"),i(U,"class","filters svelte-jox709"),i(ut,"class","svelte-jox709"),i(Q,"class","transactions-section svelte-jox709")},m(k,E){D(k,t,E),s(t,l),s(l,e),s(l,f),s(l,p),s(p,g),s(g,d),s(g,_),s(p,c),s(p,h),s(t,w),s(t,B),s(B,L),s(B,J),s(B,H),s(H,R),s(R,O),s(R,M),s(H,X),s(H,I),s(t,mt),s(t,z),s(z,A),s(z,at),s(z,S),s(S,x),s(x,dt),s(S,bt),s(S,K),D(k,ft,E),D(k,U,E),s(U,nt),s(nt,pt),s(nt,Mt),s(nt,F),s(F,$),s(F,tt),s(F,et),s(F,lt),ce(F,a[0],!0),s(U,qt),s(U,ot),s(ot,ht),s(ot,Ut),s(ot,rt),vt(rt,a[1]),s(U,Rt),s(U,it),s(it,_t),s(it,zt),s(it,ct),vt(ct,a[2]),D(k,gt,E),D(k,Q,E),s(Q,ut),s(ut,Ft),s(ut,Et),s(ut,Kt),s(Q,Zt),Z.m(Q,null),Gt||(ne=[Ht(F,"change",a[12]),Ht(rt,"input",a[13]),Ht(ct,"input",a[14])],Gt=!0)},p(k,E){E&16&&v!==(v=W(k[4].totalTopup,2)+"")&&G(d,v),E&16&&b!==(b=W(k[4].totalSpent,2)+"")&&G(O,b),E&16&&C!==(C=W(k[4].totalClicks)+"")&&G(dt,C),E&1&&ce(F,k[0]),E&2&&vt(rt,k[1]),E&4&&vt(ct,k[2]),E&32&&jt!==(jt=k[5].length+"")&&G(Et,jt),Dt===(Dt=oe(k))&&Z?Z.p(k,E):(Z.d(1),Z=Dt(k),Z&&(Z.c(),Z.m(Q,null)))},d(k){k&&(r(t),r(ft),r(U),r(gt),r(Q)),Z.d(),Gt=!1,_e(ne)}}}function je(a){let t,l='<div class="spinner svelte-jox709"></div> <p>Naƒç√≠tavam reporty...</p>';return{c(){t=o("div"),t.innerHTML=l,this.h()},l(e){t=n(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1y0x6lg"&&(t.innerHTML=l),this.h()},h(){i(t,"class","loading svelte-jox709")},m(e,u){D(e,t,u)},p:st,d(e){e&&r(t)}}}function ye(a){let t,l,e,u='<tr><th class="svelte-jox709">D√°tum</th> <th class="svelte-jox709">Typ</th> <th class="svelte-jox709">Suma</th> <th class="svelte-jox709">Zostatok</th> <th class="svelte-jox709">Popis</th> <th class="svelte-jox709">Stav</th></tr>',f,p,g=ue(a[5]),v=[];for(let d=0;d<g.length;d+=1)v[d]=de(ve(a,g,d));return{c(){t=o("div"),l=o("table"),e=o("thead"),e.innerHTML=u,f=y(),p=o("tbody");for(let d=0;d<v.length;d+=1)v[d].c();this.h()},l(d){t=n(d,"DIV",{class:!0});var _=m(t);l=n(_,"TABLE",{class:!0});var c=m(l);e=n(c,"THEAD",{"data-svelte-h":!0}),T(e)!=="svelte-f7eyi9"&&(e.innerHTML=u),f=j(c),p=n(c,"TBODY",{});var h=m(p);for(let P=0;P<v.length;P+=1)v[P].l(h);h.forEach(r),c.forEach(r),_.forEach(r),this.h()},h(){i(l,"class","svelte-jox709"),i(t,"class","table-wrapper svelte-jox709")},m(d,_){D(d,t,_),s(t,l),s(l,e),s(l,f),s(l,p);for(let c=0;c<v.length;c+=1)v[c]&&v[c].m(p,null)},p(d,_){if(_&32){g=ue(d[5]);let c;for(c=0;c<g.length;c+=1){const h=ve(d,g,c);v[c]?v[c].p(h,_):(v[c]=de(h),v[c].c(),v[c].m(p,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=g.length}},d(d){d&&r(t),be(v,d)}}}function ge(a){let t,l='<span class="no-data-icon svelte-jox709">üìã</span> <p>≈Ωiadne transakcie pre zvolen√© filtre</p>';return{c(){t=o("div"),t.innerHTML=l,this.h()},l(e){t=n(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-y0gkc7"&&(t.innerHTML=l),this.h()},h(){i(t,"class","no-data svelte-jox709")},m(e,u){D(e,t,u)},p:st,d(e){e&&r(t)}}}function Ee(a){let t,l=a[20].type+"",e;return{c(){t=o("span"),e=V(l),this.h()},l(u){t=n(u,"SPAN",{class:!0});var f=m(t);e=N(f,l),f.forEach(r),this.h()},h(){i(t,"class","badge badge-secondary svelte-jox709")},m(u,f){D(u,t,f),s(t,e)},p(u,f){f&32&&l!==(l=u[20].type+"")&&G(e,l)},d(u){u&&r(t)}}}function De(a){let t,l="‚ûñ Odpoƒç√≠tanie";return{c(){t=o("span"),t.textContent=l,this.h()},l(e){t=n(e,"SPAN",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1uq31t"&&(t.textContent=l),this.h()},h(){i(t,"class","badge badge-warning svelte-jox709")},m(e,u){D(e,t,u)},p:st,d(e){e&&r(t)}}}function Se(a){let t,l="üëÜ Preklik";return{c(){t=o("span"),t.textContent=l,this.h()},l(e){t=n(e,"SPAN",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1mhp5fz"&&(t.textContent=l),this.h()},h(){i(t,"class","badge badge-info svelte-jox709")},m(e,u){D(e,t,u)},p:st,d(e){e&&r(t)}}}function Te(a){let t,l="üíµ Dob√≠janie";return{c(){t=o("span"),t.textContent=l,this.h()},l(e){t=n(e,"SPAN",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-2hwpp2"&&(t.textContent=l),this.h()},h(){i(t,"class","badge badge-success svelte-jox709")},m(e,u){D(e,t,u)},p:st,d(e){e&&r(t)}}}function Pe(a){let t,l,e=a[20].status+"",u;return{c(){t=o("span"),l=y(),u=V(e),this.h()},l(f){t=n(f,"SPAN",{class:!0}),m(t).forEach(r),l=j(f),u=N(f,e),this.h()},h(){i(t,"class","status-dot svelte-jox709")},m(f,p){D(f,t,p),D(f,l,p),D(f,u,p)},p(f,p){p&32&&e!==(e=f[20].status+"")&&G(u,e)},d(f){f&&(r(t),r(l),r(u))}}}function Ie(a){let t,l;return{c(){t=o("span"),l=V(" ƒåak√°"),this.h()},l(e){t=n(e,"SPAN",{class:!0}),m(t).forEach(r),l=N(e," ƒåak√°"),this.h()},h(){i(t,"class","status-dot pending svelte-jox709")},m(e,u){D(e,t,u),D(e,l,u)},p:st,d(e){e&&(r(t),r(l))}}}function Ae(a){let t,l;return{c(){t=o("span"),l=V(" Dokonƒçen√©"),this.h()},l(e){t=n(e,"SPAN",{class:!0}),m(t).forEach(r),l=N(e," Dokonƒçen√©"),this.h()},h(){i(t,"class","status-dot completed svelte-jox709")},m(e,u){D(e,t,u),D(e,l,u)},p:st,d(e){e&&(r(t),r(l))}}}function de(a){let t,l,e=Wt(a[20].created_at)+"",u,f,p,g,v,d=a[20].amount>=0?"+":"",_,c=W(a[20].amount,2)+"",h,P,w,B,L,Y=W(a[20].balance_after,2)+"",J,H,R,b,O=(a[20].description||"-")+"",M,X,I,q;function mt(x,C){return x[20].type==="topup"?Te:x[20].type==="click"?Se:x[20].type==="deduction"?De:Ee}let z=mt(a),A=z(a);function kt(x,C){return x[20].status==="completed"?Ae:x[20].status==="pending"?Ie:Pe}let at=kt(a),S=at(a);return{c(){t=o("tr"),l=o("td"),u=V(e),f=y(),p=o("td"),A.c(),g=y(),v=o("td"),_=V(d),h=V(c),P=V(" ‚Ç¨"),B=y(),L=o("td"),J=V(Y),H=V(" ‚Ç¨"),R=y(),b=o("td"),M=V(O),X=y(),I=o("td"),S.c(),q=y(),this.h()},l(x){t=n(x,"TR",{});var C=m(t);l=n(C,"TD",{class:!0});var dt=m(l);u=N(dt,e),dt.forEach(r),f=j(C),p=n(C,"TD",{class:!0});var bt=m(p);A.l(bt),bt.forEach(r),g=j(C),v=n(C,"TD",{class:!0});var K=m(v);_=N(K,d),h=N(K,c),P=N(K," ‚Ç¨"),K.forEach(r),B=j(C),L=n(C,"TD",{class:!0});var xt=m(L);J=N(xt,Y),H=N(xt," ‚Ç¨"),xt.forEach(r),R=j(C),b=n(C,"TD",{class:!0});var ft=m(b);M=N(ft,O),ft.forEach(r),X=j(C),I=n(C,"TD",{class:!0});var U=m(I);S.l(U),U.forEach(r),q=j(C),C.forEach(r),this.h()},h(){i(l,"class","svelte-jox709"),i(p,"class","svelte-jox709"),i(v,"class",w="amount "+(a[20].amount>=0?"positive":"negative")+" svelte-jox709"),i(L,"class","svelte-jox709"),i(b,"class","description svelte-jox709"),i(I,"class","svelte-jox709")},m(x,C){D(x,t,C),s(t,l),s(l,u),s(t,f),s(t,p),A.m(p,null),s(t,g),s(t,v),s(v,_),s(v,h),s(v,P),s(t,B),s(t,L),s(L,J),s(L,H),s(t,R),s(t,b),s(b,M),s(t,X),s(t,I),S.m(I,null),s(t,q)},p(x,C){C&32&&e!==(e=Wt(x[20].created_at)+"")&&G(u,e),z===(z=mt(x))&&A?A.p(x,C):(A.d(1),A=z(x),A&&(A.c(),A.m(p,null))),C&32&&d!==(d=x[20].amount>=0?"+":"")&&G(_,d),C&32&&c!==(c=W(x[20].amount,2)+"")&&G(h,c),C&32&&w!==(w="amount "+(x[20].amount>=0?"positive":"negative")+" svelte-jox709")&&i(v,"class",w),C&32&&Y!==(Y=W(x[20].balance_after,2)+"")&&G(J,Y),C&32&&O!==(O=(x[20].description||"-")+"")&&G(M,O),at===(at=kt(x))&&S?S.p(x,C):(S.d(1),S=at(x),S&&(S.c(),S.m(I,null)))},d(x){x&&r(t),A.d(),S.d()}}}function Ne(a){let t,l,e,u="üì• Exportova≈• CSV",f,p,g;function v(c,h){return c[3]?je:ke}let d=v(a),_=d(a);return{c(){t=o("div"),l=o("div"),e=o("button"),e.textContent=u,f=y(),_.c(),this.h()},l(c){t=n(c,"DIV",{class:!0});var h=m(t);l=n(h,"DIV",{class:!0});var P=m(l);e=n(P,"BUTTON",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-1ljlbll"&&(e.textContent=u),P.forEach(r),f=j(h),_.l(h),h.forEach(r),this.h()},h(){i(e,"class","export-btn svelte-jox709"),i(l,"class","reports-header svelte-jox709"),i(t,"class","reports-container svelte-jox709")},m(c,h){D(c,t,h),s(t,l),s(l,e),s(t,f),_.m(t,null),p||(g=Ht(e,"click",a[8]),p=!0)},p(c,[h]){d===(d=v(c))&&_?_.p(c,h):(_.d(1),_=d(c),_&&(_.c(),_.m(t,null)))},i:st,o:st,d(c){c&&r(t),_.d(),p=!1,g()}}}function W(a,t=0){return(a||0).toLocaleString("sk-SK",{minimumFractionDigits:t,maximumFractionDigits:t})}function Wt(a){return a?new Date(a).toLocaleDateString("sk-SK",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function Ve(a,t,l){let e,u,f;const p=Qt("vendor");ie(a,p,b=>l(11,f=b));const g=Qt("shop");ie(a,g,b=>l(10,u=b));const v=Qt("API_BASE");let d=!0,_=[],c="all",h="",P="",w={totalTopup:0,totalSpent:0,totalClicks:0};pe(async()=>{await B()});async function B(){l(3,d=!0);const b=localStorage.getItem("vendor_token");if(b){try{const M=await(await fetch(`${v}/vendor/transactions`,{headers:{Authorization:`Bearer ${b}`}})).json();M.success&&M.data&&(l(9,_=M.data),L())}catch(O){console.error("Error loading transactions:",O)}l(3,d=!1)}}function L(){l(4,w={totalTopup:0,totalSpent:0,totalClicks:0}),_.forEach(b=>{b.type==="topup"&&b.amount>0?l(4,w.totalTopup+=b.amount,w):(b.type==="click"||b.amount<0)&&(l(4,w.totalSpent+=Math.abs(b.amount),w),l(4,w.totalClicks++,w))})}function Y(){const b=["D√°tum","Typ","Suma","Zostatok","Popis"],O=e.map(q=>[Wt(q.created_at),q.type,q.amount,q.balance_after,q.description||""]),M=[b,...O].map(q=>q.join(";")).join(`
`),X=new Blob([M],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a");I.href=URL.createObjectURL(X),I.download=`report-${new Date().toISOString().split("T")[0]}.csv`,I.click()}function J(){c=he(this),l(0,c)}function H(){h=this.value,l(1,h)}function R(){P=this.value,l(2,P)}return a.$$.update=()=>{a.$$.dirty&2048,a.$$.dirty&1024,a.$$.dirty&519&&l(5,e=_.filter(b=>!(c!=="all"&&b.type!==c||h&&new Date(b.created_at)<new Date(h)||P&&new Date(b.created_at)>new Date(P+"T23:59:59"))))},[c,h,P,d,w,e,p,g,Y,_,u,f,J,H,R]}class Be extends xe{constructor(t){super(),Ce(this,t,Ve,Ne,fe,{})}}export{Be as component};
