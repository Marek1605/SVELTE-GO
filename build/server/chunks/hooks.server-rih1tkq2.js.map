{"version":3,"file":"hooks.server-rih1tkq2.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["const BACKEND_URL = process.env.BACKEND_URL || \"http://pc4kcc0ko0k0k08gk840cos0.46.224.7.54.sslip.io\";\nasync function handle({ event, resolve }) {\n  if (event.url.pathname.startsWith(\"/api/\")) {\n    try {\n      const targetUrl = BACKEND_URL + event.url.pathname + event.url.search;\n      const headers = new Headers();\n      const accept = event.request.headers.get(\"accept\");\n      if (accept) headers.set(\"Accept\", accept);\n      const contentType = event.request.headers.get(\"content-type\");\n      if (contentType) headers.set(\"Content-Type\", contentType);\n      const authorization = event.request.headers.get(\"authorization\");\n      if (authorization) headers.set(\"Authorization\", authorization);\n      const fetchOpts = {\n        method: event.request.method,\n        headers\n      };\n      if (event.request.method !== \"GET\" && event.request.method !== \"HEAD\") {\n        fetchOpts.body = await event.request.arrayBuffer();\n      }\n      const response = await fetch(targetUrl, fetchOpts);\n      const respHeaders = new Headers();\n      const forwardHeaders = [\n        \"content-type\",\n        \"cache-control\",\n        \"etag\",\n        \"last-modified\",\n        \"x-cache\",\n        \"x-response-time\",\n        \"content-length\"\n      ];\n      for (const h of forwardHeaders) {\n        const val = response.headers.get(h);\n        if (val) respHeaders.set(h, val);\n      }\n      respHeaders.set(\"Access-Control-Allow-Origin\", \"*\");\n      return new Response(response.body, {\n        status: response.status,\n        headers: respHeaders\n      });\n    } catch (e) {\n      console.error(\"[proxy]\", event.url.pathname, e);\n      return new Response(\"Backend unavailable\", { status: 502 });\n    }\n  }\n  return resolve(event);\n}\nexport {\n  handle\n};\n"],"names":[],"mappings":"AAAA,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,sDAAsD;AACrG,eAAe,MAAM,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;AAC1C,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;AAC9C,IAAI,IAAI;AACR,MAAM,MAAM,SAAS,GAAG,WAAW,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM;AAC3E,MAAM,MAAM,OAAO,GAAG,IAAI,OAAO,EAAE;AACnC,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;AACxD,MAAM,IAAI,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;AAC/C,MAAM,MAAM,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;AACnE,MAAM,IAAI,WAAW,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,WAAW,CAAC;AAC/D,MAAM,MAAM,aAAa,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;AACtE,MAAM,IAAI,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC;AACpE,MAAM,MAAM,SAAS,GAAG;AACxB,QAAQ,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM;AACpC,QAAQ;AACR,OAAO;AACP,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,KAAK,MAAM,EAAE;AAC7E,QAAQ,SAAS,CAAC,IAAI,GAAG,MAAM,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE;AAC1D,MAAM;AACN,MAAM,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,SAAS,EAAE,SAAS,CAAC;AACxD,MAAM,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE;AACvC,MAAM,MAAM,cAAc,GAAG;AAC7B,QAAQ,cAAc;AACtB,QAAQ,eAAe;AACvB,QAAQ,MAAM;AACd,QAAQ,eAAe;AACvB,QAAQ,SAAS;AACjB,QAAQ,iBAAiB;AACzB,QAAQ;AACR,OAAO;AACP,MAAM,KAAK,MAAM,CAAC,IAAI,cAAc,EAAE;AACtC,QAAQ,MAAM,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3C,QAAQ,IAAI,GAAG,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC;AACxC,MAAM;AACN,MAAM,WAAW,CAAC,GAAG,CAAC,6BAA6B,EAAE,GAAG,CAAC;AACzD,MAAM,OAAO,IAAI,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE;AACzC,QAAQ,MAAM,EAAE,QAAQ,CAAC,MAAM;AAC/B,QAAQ,OAAO,EAAE;AACjB,OAAO,CAAC;AACR,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE;AAChB,MAAM,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrD,MAAM,OAAO,IAAI,QAAQ,CAAC,qBAAqB,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACjE,IAAI;AACJ,EAAE;AACF,EAAE,OAAO,OAAO,CAAC,KAAK,CAAC;AACvB;;;;"}