import { c as create_ssr_component, a as subscribe, b as add_attribute, e as each, d as escape } from './ssr-C0zM4PB_.js';
import { p as page } from './stores-DT-_6Fby.js';
import './ssr2-BzBrVqhc.js';
import './state.svelte-C5sH4JvD.js';

const css = {
  code: ".search-page.svelte-a05ptn.svelte-a05ptn{max-width:1200px;margin:0 auto;padding:24px}.search-header.svelte-a05ptn.svelte-a05ptn{margin-bottom:24px}.search-header.svelte-a05ptn h1.svelte-a05ptn{font-size:24px;margin:0 0 16px;color:#1F2937}.search-form.svelte-a05ptn.svelte-a05ptn{display:flex;gap:12px}.search-input.svelte-a05ptn.svelte-a05ptn{flex:1;padding:14px 18px;border:2px solid #E5E7EB;border-radius:10px;font-size:16px}.search-input.svelte-a05ptn.svelte-a05ptn:focus{outline:none;border-color:#F97316}.search-btn.svelte-a05ptn.svelte-a05ptn{padding:14px 28px;background:#F97316;color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer}.search-btn.svelte-a05ptn.svelte-a05ptn:hover{background:#EA580C}.search-info.svelte-a05ptn.svelte-a05ptn{padding:14px 18px;background:#F9FAFB;border-radius:10px;margin-bottom:24px;font-size:14px;color:#374151}.loading.svelte-a05ptn.svelte-a05ptn,.empty.svelte-a05ptn.svelte-a05ptn{text-align:center;padding:60px 20px;color:#6B7280}.spinner.svelte-a05ptn.svelte-a05ptn{width:40px;height:40px;border:4px solid #E5E7EB;border-top-color:#F97316;border-radius:50%;animation:svelte-a05ptn-spin 0.8s linear infinite;margin:0 auto 16px}@keyframes svelte-a05ptn-spin{to{transform:rotate(360deg)}}.empty-icon.svelte-a05ptn.svelte-a05ptn{font-size:48px;margin-bottom:16px}.empty.svelte-a05ptn h3.svelte-a05ptn{margin:0 0 8px;color:#374151}.products-grid.svelte-a05ptn.svelte-a05ptn{display:grid;grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));gap:20px;margin-bottom:24px}.product-card.svelte-a05ptn.svelte-a05ptn{background:#fff;border:1px solid #E5E7EB;border-radius:12px;overflow:hidden;text-decoration:none;transition:all 0.2s}.product-card.svelte-a05ptn.svelte-a05ptn:hover{border-color:#F97316;box-shadow:0 4px 12px rgba(0,0,0,0.1);transform:translateY(-2px)}.product-img.svelte-a05ptn.svelte-a05ptn{aspect-ratio:1;background:#F9FAFB;display:flex;align-items:center;justify-content:center;padding:16px}.product-img.svelte-a05ptn img.svelte-a05ptn{max-width:100%;max-height:100%;object-fit:contain}.product-info.svelte-a05ptn.svelte-a05ptn{padding:16px}.product-title.svelte-a05ptn.svelte-a05ptn{font-size:14px;font-weight:500;color:#1F2937;margin:0 0 8px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-price.svelte-a05ptn.svelte-a05ptn{font-size:18px;font-weight:700;color:#059669}.product-offers.svelte-a05ptn.svelte-a05ptn{font-size:12px;color:#6B7280;margin-top:4px}.pagination.svelte-a05ptn.svelte-a05ptn{display:flex;gap:6px;justify-content:center}.page-btn.svelte-a05ptn.svelte-a05ptn{padding:10px 16px;border:1px solid #E5E7EB;background:#fff;border-radius:8px;cursor:pointer;font-size:14px}.page-btn.svelte-a05ptn.svelte-a05ptn:hover:not(:disabled){border-color:#F97316}.page-btn.svelte-a05ptn.svelte-a05ptn:disabled{opacity:0.5;cursor:not-allowed}.page-btn.active.svelte-a05ptn.svelte-a05ptn{background:#F97316;color:#fff;border-color:#F97316}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\n    import { page } from '$app/stores';\\n    import { onMount } from 'svelte';\\n    import { browser } from '$app/environment';\\n    \\n    const API_BASE = import.meta.env.VITE_API_URL || 'http://pc4kcc0ko0k0k08gk840cos0.46.224.7.54.sslip.io/api/v1';\\n    \\n    let searchQuery = '';\\n    let products = [];\\n    let loading = false;\\n    let total = 0;\\n    let currentPage = 1;\\n    let perPage = 20;\\n    let totalPages = 1;\\n    let searched = false;\\n    \\n    $: query = $page.url.searchParams.get('q') || '';\\n    \\n    onMount(async () => {\\n        if (!browser) return;\\n        searchQuery = query;\\n        if (query) {\\n            await search();\\n        }\\n    });\\n    \\n    async function search() {\\n        if (!searchQuery.trim()) return;\\n        loading = true;\\n        searched = true;\\n        \\n        try {\\n            // Sk√∫sime r√¥zne form√°ty API\\n            const res = await fetch(API_BASE + '/products?search=' + encodeURIComponent(searchQuery) + '&page=' + currentPage + '&limit=' + perPage);\\n            const data = await res.json();\\n            \\n            if (data.success) {\\n                products = data.data?.items || data.data?.products || data.data || [];\\n                total = data.data?.total || data.meta?.total || products.length;\\n                totalPages = Math.ceil(total / perPage) || 1;\\n            } else {\\n                products = [];\\n                total = 0;\\n            }\\n        } catch (e) {\\n            console.error('Search error:', e);\\n            products = [];\\n            total = 0;\\n        }\\n        loading = false;\\n    }\\n    \\n    function handleSearch(e) {\\n        e?.preventDefault();\\n        currentPage = 1;\\n        const url = new URL(window.location.href);\\n        url.searchParams.set('q', searchQuery);\\n        window.history.pushState({}, '', url);\\n        search();\\n    }\\n    \\n    function handlePageChange(p) {\\n        currentPage = p;\\n        search();\\n        window.scrollTo(0, 0);\\n    }\\n    \\n    function formatPrice(price) {\\n        return (price || 0).toLocaleString('sk-SK', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ‚Ç¨';\\n    }\\n<\/script>\\n\\n<svelte:head>\\n    <title>{searchQuery ? 'V√Ωsledky: ' + searchQuery : 'Vyhƒæad√°vanie'} | MegaPrice</title>\\n</svelte:head>\\n\\n<div class=\\"search-page\\">\\n    <div class=\\"search-header\\">\\n        <h1>üîç Vyhƒæad√°vanie</h1>\\n        <form on:submit={handleSearch} class=\\"search-form\\">\\n            <input type=\\"text\\" bind:value={searchQuery} placeholder=\\"Hƒæada≈• produkty...\\" class=\\"search-input\\">\\n            <button type=\\"submit\\" class=\\"search-btn\\">Hƒæada≈•</button>\\n        </form>\\n    </div>\\n    \\n    {#if searched}\\n    <div class=\\"search-info\\">\\n        V√Ωsledky pre: <strong>\\"{query || searchQuery}\\"</strong> ‚Ä¢ N√°jden√Ωch <strong>{total}</strong> produktov\\n    </div>\\n    {/if}\\n    \\n    {#if loading}\\n    <div class=\\"loading\\">\\n        <div class=\\"spinner\\"></div>\\n        <p>Hƒæad√°m produkty...</p>\\n    </div>\\n    {:else if searched && products.length === 0}\\n    <div class=\\"empty\\">\\n        <div class=\\"empty-icon\\">üîç</div>\\n        <h3>≈Ωiadne v√Ωsledky</h3>\\n        <p>Pre hƒæadan√Ω v√Ωraz \\"{query || searchQuery}\\" sme nena≈°li ≈æiadne produkty.</p>\\n    </div>\\n    {:else if products.length > 0}\\n    <div class=\\"products-grid\\">\\n        {#each products as product}\\n        <a href=\\"/produkt/{product.slug || product.id}\\" class=\\"product-card\\">\\n            <div class=\\"product-img\\">\\n                <img src={product.image_url || 'https://via.placeholder.com/200'} alt={product.title} on:error={(e) => e.target.src = 'https://via.placeholder.com/200'}>\\n            </div>\\n            <div class=\\"product-info\\">\\n                <h3 class=\\"product-title\\">{product.title || product.name}</h3>\\n                <div class=\\"product-price\\">{formatPrice(product.price_min || product.price)}</div>\\n                {#if product.offer_count > 0}\\n                <div class=\\"product-offers\\">{product.offer_count} pon√∫k</div>\\n                {/if}\\n            </div>\\n        </a>\\n        {/each}\\n    </div>\\n    \\n    {#if totalPages > 1}\\n    <div class=\\"pagination\\">\\n        <button class=\\"page-btn\\" on:click={() => handlePageChange(currentPage - 1)} disabled={currentPage === 1}>‚Äπ Predo≈°l√°</button>\\n        {#each Array(Math.min(totalPages, 5)) as _, i}\\n            <button class=\\"page-btn\\" class:active={currentPage === i + 1} on:click={() => handlePageChange(i + 1)}>{i + 1}</button>\\n        {/each}\\n        <button class=\\"page-btn\\" on:click={() => handlePageChange(currentPage + 1)} disabled={currentPage === totalPages}>ƒéal≈°ia ‚Ä∫</button>\\n    </div>\\n    {/if}\\n    {:else if !searched}\\n    <div class=\\"empty\\">\\n        <div class=\\"empty-icon\\">üîç</div>\\n        <h3>Zadajte hƒæadan√Ω v√Ωraz</h3>\\n        <p>Nap√≠≈°te n√°zov produktu, znaƒçku alebo kateg√≥riu.</p>\\n    </div>\\n    {/if}\\n</div>\\n\\n<style>\\n    .search-page { max-width: 1200px; margin: 0 auto; padding: 24px; }\\n    .search-header { margin-bottom: 24px; }\\n    .search-header h1 { font-size: 24px; margin: 0 0 16px; color: #1F2937; }\\n    .search-form { display: flex; gap: 12px; }\\n    .search-input { flex: 1; padding: 14px 18px; border: 2px solid #E5E7EB; border-radius: 10px; font-size: 16px; }\\n    .search-input:focus { outline: none; border-color: #F97316; }\\n    .search-btn { padding: 14px 28px; background: #F97316; color: #fff; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; }\\n    .search-btn:hover { background: #EA580C; }\\n    .search-info { padding: 14px 18px; background: #F9FAFB; border-radius: 10px; margin-bottom: 24px; font-size: 14px; color: #374151; }\\n    .loading, .empty { text-align: center; padding: 60px 20px; color: #6B7280; }\\n    .spinner { width: 40px; height: 40px; border: 4px solid #E5E7EB; border-top-color: #F97316; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 16px; }\\n    @keyframes spin { to { transform: rotate(360deg); } }\\n    .empty-icon { font-size: 48px; margin-bottom: 16px; }\\n    .empty h3 { margin: 0 0 8px; color: #374151; }\\n    .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin-bottom: 24px; }\\n    .product-card { background: #fff; border: 1px solid #E5E7EB; border-radius: 12px; overflow: hidden; text-decoration: none; transition: all 0.2s; }\\n    .product-card:hover { border-color: #F97316; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-2px); }\\n    .product-img { aspect-ratio: 1; background: #F9FAFB; display: flex; align-items: center; justify-content: center; padding: 16px; }\\n    .product-img img { max-width: 100%; max-height: 100%; object-fit: contain; }\\n    .product-info { padding: 16px; }\\n    .product-title { font-size: 14px; font-weight: 500; color: #1F2937; margin: 0 0 8px; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }\\n    .product-price { font-size: 18px; font-weight: 700; color: #059669; }\\n    .product-offers { font-size: 12px; color: #6B7280; margin-top: 4px; }\\n    .pagination { display: flex; gap: 6px; justify-content: center; }\\n    .page-btn { padding: 10px 16px; border: 1px solid #E5E7EB; background: #fff; border-radius: 8px; cursor: pointer; font-size: 14px; }\\n    .page-btn:hover:not(:disabled) { border-color: #F97316; }\\n    .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }\\n    .page-btn.active { background: #F97316; color: #fff; border-color: #F97316; }\\n</style>\\n"],"names":[],"mappings":"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"}`
};
function formatPrice(price) {
  return (price || 0).toLocaleString("sk-SK", {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  }) + " ‚Ç¨";
}
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $page, $$unsubscribe_page;
  $$unsubscribe_page = subscribe(page, (value) => $page = value);
  let searchQuery = "";
  let products = [];
  $$result.css.add(css);
  $page.url.searchParams.get("q") || "";
  $$unsubscribe_page();
  return `${$$result.head += `<!-- HEAD_svelte-lwlqr_START -->${$$result.title = `<title>${escape("Vyhƒæad√°vanie")} | MegaPrice</title>`, ""}<!-- HEAD_svelte-lwlqr_END -->`, ""} <div class="search-page svelte-a05ptn"><div class="search-header svelte-a05ptn"><h1 class="svelte-a05ptn" data-svelte-h="svelte-10kllz0">üîç Vyhƒæad√°vanie</h1> <form class="search-form svelte-a05ptn"><input type="text" placeholder="Hƒæada≈• produkty..." class="search-input svelte-a05ptn"${add_attribute("value", searchQuery, 0)}> <button type="submit" class="search-btn svelte-a05ptn" data-svelte-h="svelte-17oh92o">Hƒæada≈•</button></form></div> ${``} ${`${`${products.length > 0 ? `<div class="products-grid svelte-a05ptn">${each(products, (product) => {
    return `<a href="${"/produkt/" + escape(product.slug || product.id, true)}" class="product-card svelte-a05ptn"><div class="product-img svelte-a05ptn"><img${add_attribute("src", product.image_url || "https://via.placeholder.com/200", 0)}${add_attribute("alt", product.title, 0)} class="svelte-a05ptn"></div> <div class="product-info svelte-a05ptn"><h3 class="product-title svelte-a05ptn">${escape(product.title || product.name)}</h3> <div class="product-price svelte-a05ptn">${escape(formatPrice(product.price_min || product.price))}</div> ${product.offer_count > 0 ? `<div class="product-offers svelte-a05ptn">${escape(product.offer_count)} pon√∫k</div>` : ``}</div> </a>`;
  })}</div> ${``}` : `${`<div class="empty svelte-a05ptn" data-svelte-h="svelte-dfpd89"><div class="empty-icon svelte-a05ptn">üîç</div> <h3 class="svelte-a05ptn">Zadajte hƒæadan√Ω v√Ωraz</h3> <p>Nap√≠≈°te n√°zov produktu, znaƒçku alebo kateg√≥riu.</p></div>`}`}`}`} </div>`;
});

export { Page as default };
//# sourceMappingURL=_page.svelte-BQ4824Cl.js.map
